<div id=admin__ID style='display:none'>
    VmInclude:__COMPONENT__/toolbar/form-toolbar.html
</div>
<section id=form_container__ID>
    <div id=header__ID>
		HEALTH HISTORY
	</div>
	<form id=F__ID>
        <div class="container">
            	Have you suffered from any of the following symptoms or medical conditions?
                <hr style='border-top:1px solid #727b84;'></hr>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>High blood pressure</span>
                </div>
                <div class="col-sm-2 control-group">
					<label class="control check_checkmark">
							<input type="checkbox"  name="hypertension"  />
						<div class="control_indicator"></div>
					</label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Other heart condition</span>
                </div>
                <div class="col-sm-4 control-group">
                    Please specify:
                    <input class="form-control" type="text" name="heart_other_specify" placeholder="">
                </div>
            </div>
			<div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>Diabetes – Type 1</span>
                </div>
                <div class="col-sm-2 control-group">
					<label class="control check_checkmark">
							<input type="checkbox"  name="diabetes_1"  />
						<div class="control_indicator"></div>
					</label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>Diabetes – Type 2</span>
                </div>
                <div class="col-sm-2 control-group">
					<label class="control check_checkmark">
							<input type="checkbox"  name="diabetes_2"  />
						<div class="control_indicator"></div>
					</label>
                </div>
            </div>
			<div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>Broken nose</span>
                </div>
                <div class="col-sm-2 control-group">
					<label class="control check_checkmark">
							<input type="checkbox"  name="broken_nose"  />
						<div class="control_indicator"></div>
					</label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>Stroke</span>
                </div>
                <div class="col-sm-2 control-group">
					<label class="control check_checkmark">
							<input type="checkbox"  name="stroke"  />
						<div class="control_indicator"></div>
					</label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>Epilepsy / Fits</span>
                </div>
                <div class="col-sm-2 control-group">
					<label class="control check_checkmark">
							<input type="checkbox"  name="epilepsy"  />
						<div class="control_indicator"></div>
					</label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>Tonsillitis / recurrent sore throat</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control check_checkmark">
                            <input type="checkbox"  name="tonsillitis"  />
                        <div class="control_indicator"></div>
                    </label>
                </div>
			</div>
			<div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>Hay fever / sinusitis</span>
                </div>
                <div class="col-sm-2 control-group">
					<label class="control check_checkmark">
							<input type="checkbox"  name="sinusitis"  />
						<div class="control_indicator"></div>
					</label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-10 control-group">
					<span>Please list ALL past and present medical conditions not previously listed:</span>
                    <textarea class="form-control" name="Other_Medical_Condition" placeholder="Other Medical Condition"></textarea>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-10 control-group">
					<span>Have you ever undergone a surgical procedure? If yes, please list <i>(Hospital, Reason and Year)</i></span>
                    <textarea class="form-control" name="Surgical_Procedure" placeholder="Hospital  Reason  Year"></textarea>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-10 control-group">
					<span>Are you currently taking any prescription OR non-prescription medication? If yes, please list <i>(Name, Reason and Dose)</i></span>
                    <textarea class="form-control" name="Medication" placeholder="Name Reason Dose"></textarea>
                </div>
            </div>
            <hr style='border-top:1px solid #727b84;'></hr>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>1. Weight (kg). Type 0 for unknown </span>
                </div>
                <div class="col-sm-4 control-group">
                    <input class="form-control" type="number" min=0 max=300 name="weight" placeholder="Weight (kg)" required >
				</div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
					<span>2. Height (cm). Type 0 for unknown</span>
                </div>
                <div class="col-sm-4 control-group">
                    <input class="form-control" type="number" min=0 max=240 name="height" placeholder="Height (cm)" required>
				</div>
            </div>
            <hr style='border-top:1px solid #727b84;'></hr>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>3. Have you ever had a sleep study before?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="sleep_study" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="sleep_study" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
			</div>
            <div class="row row__ID">
                <div class="col-sm-1 control-group">
                </div>
                <div class="col-sm-11 control-group">
                    1.	If yes, please add the details of your most recent sleep study:
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-1 control-group">
                </div>
                <div class="col-sm-3 control-group">
					<span>Year</span>
                </div>
                <div class="col-sm-6 control-group">
                    <input class="form-control" type="date" name="sleep_study_date" placeholder="Date" >
				</div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-1 control-group">
                </div>
                <div class="col-sm-3 control-group">
					<span>Location</span>
                </div>
                <div class="col-sm-6 control-group">
                    <input class="form-control" type="text" name="sleep_study_location" placeholder="Location" >
				</div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-1 control-group">
                </div>
                <div class="col-sm-3 control-group">
					<span>Doctor</span>
                </div>
                <div class="col-sm-6 control-group">
                    <input class="form-control" type="text" name="sleep_study_doctor" placeholder="Doctor" >
				</div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-1 control-group">
                </div>
                <div class="col-sm-3 control-group">
					<span>Result</span>
                </div>
                <div class="col-sm-6 control-group">
                    <textarea class="form-control" type="text" name="sleep_study_result" placeholder="Result"></textarea>
				</div>
            </div>
            <hr style='border-top:1px solid #727b84;'></hr>
            <div class="row row__ID">
                <div class="col-sm-6 control-group">
                    <span>4.	Have you ever used a masked breathing device such a continuous positive airway pressure (CPAP)?</span>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">Yes
                            <input type="radio"  name="cpap" value=Yes required />
                        <div class="control_indicator"></div>
                    </label>
                </div>
                <div class="col-sm-2 control-group">
                    <label class="control control-radio">No
                            <input type="radio" name="cpap" value=No />
                        <div class="control_indicator"></div>
                    </label>
                </div>
			</div>
            <div class="row row__ID">
                <div class="col-sm-1 control-group">
                </div>
                <div class="col-sm-11 control-group">
                    1.	If yes, please answer:
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-1 control-group">
                </div>
                <div class="col-sm-9 control-group">
                    <span>Was it successful/unsuccessful?</span>
                    <label class="control control-radio">successful
                            <input type="radio"  name="cpap" value=successful required />
                        <div class="control_indicator"></div>
                    </label>
                    <label class="control control-radio">unsuccessful
                            <input type="radio" name="cpap" value=unsuccessful />
                        <div class="control_indicator"></div>
                    </label>
                </div>
            </div>
            <div class="row row__ID">
                <div class="col-sm-1 control-group">
                </div>
                <div class="col-sm-9 control-group">
					<span>If unsuccessful, why?</span>
                    <textarea class="form-control" type="text" name="cpap_unsuccessful" placeholder=""></textarea>
				</div>
            </div>
            <hr style='border-top:1px solid #727b84;'></hr>
            <div class="row row__ID">
                <div class="col-sm-10 control-group">
					<span>5.	Are you currently taking any regular medication. Please list medication and dose</span>
                    <textarea class="form-control" name="medication" placeholder="Medication, Dose"></textarea>
                </div>
            </div>
            <hr style='border-top:1px solid #727b84;'></hr>

			<br>
    		<button id=submit__ID type="submit" class="btn btn-secondary">Submit</button>
    	</div>
    </form>
</section>
<script>
function F__ID(){
    //-------------------------------------
    $('#D__ID').on('load',function(){
        $('#F__ID')[0].reset();
        $('#F__ID input:checkbox').removeAttr('checked');
        $('#submit__ID').show();
        var record=$vm.vm['__ID'].record; if(record==undefined) record=$vm.vm['__ID'].input.record;
        if($vm.vm['__ID'].input!=undefined && $vm.vm['__ID'].input.readonly!=undefined) $('#submit__ID').hide();
        if($vm.vm['__ID'].input!=undefined && $vm.vm['__ID'].input.admin!=undefined) $('#admin__ID').show();
        $vm.deserialize(record,'#F__ID');
    })
    //-------------------------------------
    $('#F__ID').submit(function(event){
        //--------------------------------------------------------
        event.preventDefault();
        $('#submit__ID').hide();
        //--------------------------------------------------------
        var data=$vm.serialize('#F__ID'); var dbv={}
        _before_submit(data,dbv);
        //--------------------------------------------------------
        var db_pid=$vm.module_list[$vm.vm['__ID'].name].table_id;
        var rid=undefined; if($vm.vm['__ID'].record!=undefined) rid=$vm.vm['__ID'].record.ID;
        var req={cmd:"add_json_record_s2",db_pid:db_pid,data:data,dbv:dbv};
        if(rid!=undefined) req={cmd:"modify_json_record_s2",rid:rid,db_pid:db_pid,data:data,dbv:dbv};
        $VmAPI.request({data:req,callback:function(res){
            $vm.refresh=1;
            if(rid!=undefined) window.history.go(-1);
            else if($vm.vm['__ID'].input!=undefined && $vm.vm['__ID'].input.goback!=undefined) window.history.go(-1);
            else $vm.alert('Your data has been successfully submitted');
        }});
        //--------------------------------------------------------
    })
    //--------------------------------------------------------
    var _before_submit=function(data,dbv){
        if($vm.coq_participant!=undefined){
            data.Participant=$vm.coq_participant;
            data.Participant_uid=$vm.coq_participant_uid;
            dbv.S1=$vm.coq_visit;
            dbv.PPID=$vm.coq_participant_pid;
            dbv.PUID=$vm.coq_participant_uid;
        }
    }
    //--------------------------------------------------------
}
</script>
<style>
    #D__ID{
        height:100%;
        overflow: auto;
        animation: vm_module_fadein 1.0s;
        background: rgba(151,164,181,0.95);
    }
</style>
VmInclude:__CURRENT_PATH__/task-form.css
